---
import type { Time } from '@/lib/utils'

import Span from '@/components/Span.vue'
import MechanicSection from '@/components/section/MechanicSection.astro'
import SolutionSection from '@/components/section/SolutionSection.astro'

import Stoneringer2Cast from '../_components/Stoneringer2Cast.astro'
import { translations } from '../_translations'

import img from '@/assets/07/m7s/Tmp.png'
import ListDot from '@/components/ListDot.astro'
import EventSection from '@/components/section/EventSection.astro'
import ImgRow from '@/components/typography/ImgRow.astro'
import Skill from '@/components/typography/Skill.astro'
import T from '@/components/typography/T.astro'

import BruteAbombinator from '../_components/BruteAbombinator.astro'
import BrutishSwingCast from '../_components/BrutishSwingCast.astro'
import ElectrogeneticForceActivate from '../_components/ElectrogeneticForceActivate.astro'
import GlowerPowerActivate from '../_components/GlowerPowerActivate.astro'
import GlowerPowerCast from '../_components/GlowerPowerCast.astro'
import LashingLariatCast from '../_components/LashingLariatCast.astro'
import RevengeOfTheVinesCast from '../_components/RevengeOfTheVinesCast.astro'
import SlaminatorCast from '../_components/SlaminatorCast.astro'
import StoneringerActivate from '../_components/StoneringerActivate.astro'

interface Props {
  time: Time
  base: Time
}

const { time, base = 0 }: Props = Astro.props
const brutishSwing = translations.brutishSwing
const electrogeneticForce = translations.electrogeneticForce
const glowerPower = translations.glowerPower
const lashingLariat = translations.lashingLariat
const revengeOfTheVines = translations.revengeOfTheVines
const stoneringer2Stoneringers = translations.stoneringer2Stoneringers
const slaminator = translations.slaminator
---

<Stoneringer2Cast start={time} base={base} />
<BrutishSwingCast start="06:41.085" base={base} />
<EventSection time="06:46.790" base={base}>
  <BruteAbombinator />
  利用藤蔓移动至连线墙
</EventSection>
<StoneringerActivate time="06:47.813" base={base} />
<RevengeOfTheVinesCast start="06:48.882" base={base} duration={0} />
<LashingLariatCast start="06:50.973" base={base} />
<BrutishSwingCast start="06:56.589" base={base} />
<EventSection time="07:02.289" base={base}>
  <BruteAbombinator />
  利用藤蔓移动至连线墙
</EventSection>
<StoneringerActivate time="07:03.268" base={base} />
<GlowerPowerCast start="07:04.383" base={base} duartion={0.4} />
<ElectrogeneticForceActivate time="07:06.209" base={base} />
<GlowerPowerActivate time="07:06.345" base={base} />
<SlaminatorCast start="07:07.188" base={base} />
<MechanicSection title=`机制：${stoneringer2Stoneringers}`>
  <div class="flex flex-col gap-4">
    <div class="paragraph">
      读条期间
      <Skill name={stoneringer2Stoneringers} />
      <BruteAbombinator />
      两把掏出武器，后续连续机制为：
    </div>
    <div class="paragraph">
      <ListDot />
      <Skill name={brutishSwing} />
      读条同时
      <Span variant="pink">一把</Span>
      武器
      <Span variant="pink">发光</Span>
      ，移动至连线墙后释放对应
      <Span variant="yellow">钢铁/月环</Span>
    </div>
    <div class="paragraph">
      <ListDot />
      全场AoE
      <Skill name={revengeOfTheVines} />
      释放后，使用武器的一侧释放宽于半场的
      <Skill name={lashingLariat} />
    </div>
    <div class="paragraph">
      <ListDot />
      使用
      <Span variant="pink">另一把</Span>
      武器再次重复：武器发光 → 连线墙体 → 移动 → 释放钢铁/月环
    </div>
    <div class="paragraph">
      <ListDot />
      释放组合技直线AoE + 全员点名伤害， 即
      <Skill name={[glowerPower, electrogeneticForce]}>
        <div slot="separator">和</div>
      </Skill>
    </div>
    <div class="paragraph">
      <ListDot />
      <Skill name={slaminator} />
      在场中生成塔
    </div>
    <T class="mt-8" variant="yellow" text="钢铁月环范围参考" />
    <ImgRow
      wrapperClass="max-w-100"
      borderVariant="fuchsia"
      imgs={[
        {
          src: img,
          alt: 'm7sp3: 钢铁',
          title: '钢铁',
        },
        {
          src: img,
          alt: 'm7sp3: 月环',
          title: '月环',
        },
      ]}
    />
    <T class="mt-8" variant="yellow" text=`${lashingLariat}范围参考` />
    <ImgRow
      wrapperClass="max-w-100"
      borderVariant="fuchsia"
      imgs={[
        {
          src: img,
          alt: 'm7sp3: 左半场刀',
          title: '左半场',
        },
        {
          src: img,
          alt: 'm7sp3: 右半场刀',
          title: '右半场',
        },
      ]}
    />
  </div>
</MechanicSection>
<SolutionSection>
  <div class="flex flex-col gap-4">
    <div class="gap-strat flex items-center">待补充</div>
  </div>
</SolutionSection>
